"use client";
import{jsx as e}from"react/jsx-runtime";import{useLayoutEffect as t,useEffect as o,useRef as n,memo as r,useMemo as i,useReducer as s,forwardRef as l,useImperativeHandle as c}from"react";import{flushSync as a}from"react-dom";const f=null,d=Math.min,u=Math.max,h=Math.abs,_=Array.isArray,p=setTimeout,g=(e,t,o)=>d(o,u(t,e)),v=e=>[...e].sort(((e,t)=>e-t)),m="function"==typeof queueMicrotask?queueMicrotask:e=>{Promise.resolve().then(e)},w=e=>{let t,o;return(...n)=>(t||(t=!0,o=e(...n)),o)},S=-1,y=(e,t,o)=>{const n=o?"unshift":"push";for(let o=0;o<t;o++)e[n](S);return e},b=(e,t)=>{const o=e.t[t];return o===S?e.o:o},x=(e,t,o)=>{const n=e.t[t]===S;return e.t[t]=o,e.i=d(t,e.i),n},z=(e,t)=>{if(!e.l)return 0;if(e.i>=t)return e.u[t];e.i<0&&(e.u[0]=0,e.i=0);let o=e.i,n=e.u[o];for(;o<t;)n+=b(e,o),e.u[++o]=n;return e.i=t,n},I=(e,t,o)=>{for(;o>=0&&o<e.l;){const n=z(e,o);if(n<=t){if(n+b(e,o)>t)break;o++}else o--}return g(o,0,e.l-1)},k=(e,t,o)=>{const n=t-e.l;return e.i=o?-1:d(t-1,e.i),e.l=t,n>0?(y(e.u,n),y(e.t,n,o),e.o*n):(e.u.splice(n),(o?e.t.splice(0,-n):e.t.splice(n)).reduce(((t,o)=>t-(o===S?e.o:o)),0))},R="undefined"!=typeof window,T=()=>document.documentElement,C=e=>e.ownerDocument,M=e=>e.defaultView,H=/*#__PURE__*/w((()=>!!R&&"rtl"===getComputedStyle(T()).direction)),W=/*#__PURE__*/w((()=>/iP(hone|od|ad)/.test(navigator.userAgent))),E=/*#__PURE__*/w((()=>"scrollBehavior"in T().style)),J=e=>u(e.h(),e._()),B=(e,t,o,n,r)=>(1!==n&&(e-=u(0,o)),2!==n&&(t+=u(0,o)),[u(e,0),d(t,r-1)]),O=(e,t=40,o=0,n,r=!1)=>{let i=!!o,s=[],l=0,c=0,a=0,_=0,p=0,g=0,m=0,w=0,R=0,T=i?[0,u(o-1,0)]:f,C=[0,0],M=0;const H=((e,t,o)=>({o:o?o[1]:t,t:o&&o[0]?y(o[0].slice(0,d(e,o[0].length)),u(0,e-o[0].length)):y([],e),l:e,i:-1,u:y([],e)}))(e,t,n),E=new Set,J=()=>a-c,B=e=>((e,t,o,n)=>{const r=I(e,t,d(o,e.l-1));return[r,I(e,t+n,r)]})(H,e,C[0],l),O=()=>(e=>e.l?z(e,e.l-1)+b(e,e.l-1):0)(H),D=e=>z(H,e)-g,L=e=>b(H,e),P=e=>{e&&(W()&&0!==w?g+=e:(p+=e,_++))};return{p:()=>s,v:()=>(e=>[[...e.t],e.o])(H),m:()=>m?C:(C=B(u(0,J()+g+p)),T?[d(C[0],T[0]),u(C[1],T[1])]:C),S:e=>H.t[e]===S,I:()=>!!l,k:()=>!!T&&H.t.slice(u(0,T[0]-1),d(H.l-1,T[1]+1)+1).includes(S),R:D,T:L,C:()=>H.l,M:()=>a,H:()=>w,_:()=>l,W:()=>c,h:O,J:()=>_,B:()=>(m=p,p=0,[m,2===R||J()+l>=O()]),O(e,t){const o=[e,t];return E.add(o),()=>{E.delete(o)}},D(e,t){let o,n,d=0;switch(e){case 1:{const e=m;m=0;const o=t-a,r=h(o);e&&r<h(e)+1||0!==R||(w=o<0?2:1),i&&(T=f,i=!1),a=t,d=4;const s=J();s>=-l&&s<=O()&&(d+=1,n=r>l);break}case 2:d=8,0!==w&&(o=!0,d+=1),w=0,R=0,T=f;break;case 3:{const e=t.filter((([e,t])=>H.t[e]!==t));if(!e.length)break;P(e.reduce(((e,[t,o])=>((2===R||(T?t<T[0]:D(t)+(0===w&&0===R?L(t):0)<J()))&&(e+=o-L(t)),e)),0));for(const[t,o]of e){const e=L(t),n=x(H,t,o);r&&(M+=n?o:o-e)}r&&l&&M>l&&(P(((e,t)=>{let o=0;const n=e.t.filter(((e,n)=>{const r=e!==S;return r&&n<t&&o++,r})),r=e.o;return e.i=-1,((e.o=(e=>{const t=v(e),o=e.length/2|0;return t.length%2==0?(t[o-1]+t[o])/2:t[o]})(n))-r)*u(t-o,0)})(H,C[0])),r=!1),d=3,n=!0;break}case 4:l!==t&&(l=t,d=3);break;case 5:t[1]?(P(k(H,t[0],!0)),R=2,d=1):k(H,t[0]);break;case 6:c=t;break;case 7:R=1;break;case 8:T=B(t),d=1}d&&(s=[],o&&g&&(p+=g,g=0,_++),E.forEach((([e,t])=>{d&e&&t(n)})))}}},D=R?t:o,L=(e,t)=>t&&H()?-e:e,P=(e,t,o,n,r,i)=>{const s=Date.now;let l=0,c=!1,a=!1,d=!1,u=!1;const h=(()=>{let t;const o=()=>{t!=f&&clearTimeout(t)},n=()=>{o(),t=p((()=>{t=f,(()=>{if(c||a)return c=!1,void h();d=!1,e.D(2)})()}),150)};return n.L=o,n})(),_=()=>{l=s(),d&&(u=!0),i&&e.D(6,i()),e.D(1,n()),h()},g=t=>{if(c||0===e.H()||t.ctrlKey)return;const n=s()-l;150>n&&50<n&&(o?t.deltaX:t.deltaY)&&(c=!0)},v=()=>{a=!0,d=u=!1},m=()=>{a=!1,W()&&(d=!0)};return t.addEventListener("scroll",_),t.addEventListener("wheel",g,{passive:!0}),t.addEventListener("touchstart",v,{passive:!0}),t.addEventListener("touchend",m,{passive:!0}),{P:()=>{t.removeEventListener("scroll",_),t.removeEventListener("wheel",g),t.removeEventListener("touchstart",v),t.removeEventListener("touchend",m),h.L()},$:()=>{const[t,i]=e.B();t&&(r(L(t,o),i,u),u=!1,i&&e._()>e.h()&&e.D(1,n()))}}},$=(e,t)=>{let o,n,r;const i=t?"scrollLeft":"scrollTop",s=t?"overflowX":"overflowY",l=async(n,s)=>{if(!o)return void m((()=>l(n,s)));r&&r();const c=()=>{let t;return[new Promise(((o,n)=>{t=o,r=n,e.I()&&p(n,150)})),e.O(2,(()=>{t&&t()}))]};if(s&&E()){for(;e.D(8,n()),e.k();){const[e,t]=c();try{await e}catch(e){return}finally{t()}}o.scrollTo({[t?"left":"top"]:L(n(),t),behavior:"smooth"})}else for(;;){const[r,s]=c();try{o[i]=L(n(),t),e.D(7),await r}catch(e){return}finally{s()}}};return{A(l){o=l,n=P(e,l,t,(()=>L(l[i],t)),((t,o,n)=>{if(n){const e=l.style,t=e[s];e[s]="hidden",p((()=>{e[s]=t}))}o?(l[i]=e.M()+t,r&&r()):l[i]+=t}))},P(){n&&n.P()},V(e){l((()=>e))},X(t){t+=e.M(),l((()=>t))},Y(t,{align:o,smooth:n,offset:r=0}={}){if(t=g(t,0,e.C()-1),"nearest"===o){const n=e.R(t),r=e.M();if(n<r)o="start";else{if(!(n+e.T(t)>r+e._()))return;o="end"}}l((()=>r+e.W()+e.R(t)+("end"===o?e.T(t)-e._():"center"===o?(e.T(t)-e._())/2:0)),n)},$:()=>{n&&n.$()}}},A=(e,t)=>{let o;return{A(n){const r=t?"scrollX":"scrollY",i=C(n),s=M(i),l=i.body,c=(e,t,o,n=0)=>{const r=o?"offsetLeft":"offsetTop",i=n+(o&&H()?s.innerWidth-e[r]-e.offsetWidth:e[r]),l=e.offsetParent;return e!==t&&l?c(l,t,o,i):i};o=P(e,s,t,(()=>L(s[r],t)),((o,n)=>{n?s.scroll({[t?"left":"top"]:e.M()+o}):s.scrollBy(t?o:0,t?0:o)}),(()=>c(n,l,t)))},P(){o&&o.P()},$:()=>{o&&o.$()},Y:async(o,n={})=>{const r=n.align||"start",i=n.smooth,s=n.offset||0;o=g(o,0,e.C()-1);const l=e.R(o),c=e._(),a=e.T(o);let f=l+s;if("end"===r)f+=a-c;else if("center"===r)f+=(a-c)/2;else if("nearest"===r){const t=e.M();if(l<t)f=l+s;else{if(!(l+a>t+c))return;f=l+a-c+s}}e.D(8,f);const d=L(f,t);i&&E()?window.scrollTo({[t?"left":"top"]:d,behavior:"smooth"}):window.scrollTo({[t?"left":"top"]:d}),await new Promise((e=>{window.requestAnimationFrame(e)})),e.D(7)}}},V=(e,t)=>{const o=$(e,!1),n=$(t,!0);return{A(e){o.A(e),n.A(e)},P(){o.P(),n.P()},V(e,t){o.V(t),n.V(e)},X(e,t){o.X(t),n.X(e)},Y(e,t){o.Y(t),n.Y(e)},$(){o.$(),n.$()}}},X="current",Y=(e,t)=>{if(_(e))for(const o of e)Y(o,t);else e==f||"boolean"==typeof e||t.push(e)},j=(e,t)=>{const o=e.key;return o!=f?o:"_"+t},q=e=>{const t=n();return t[X]||(t[X]=e())},U=e=>{const t=n(e);return D((()=>{t[X]=e}),[e]),t},F=e=>{let t;return{A(o){(t||(t=new(M(C(o)).ResizeObserver)(e))).observe(o)},j(e){t.unobserve(e)},P(){t&&t.disconnect()}}},G=(e,t)=>{let o;const n=t?"width":"height",r=new WeakMap,i=F((t=>{const i=[];for(const{target:s,contentRect:l}of t)if(s.offsetParent)if(s===o)e.D(4,l[n]);else{const e=r.get(s);e!=f&&i.push([e,l[n]])}i.length&&e.D(3,i)}));return{q(e){i.A(o=e)},U:(e,t)=>(r.set(e,t),i.A(e),()=>{r.delete(e),i.j(e)}),P:i.P}},K=(e,t)=>{const o=t?"width":"height",n=t?"innerWidth":"innerHeight",r=new WeakMap,i=F((t=>{const n=[];for(const{target:e,contentRect:i}of t){if(!e.offsetParent)continue;const t=r.get(e);t!=f&&n.push([t,i[o]])}n.length&&e.D(3,n)}));let s;return{q(t){const o=M(C(t)),r=()=>{e.D(4,o[n])};o.addEventListener("resize",r),r(),s=()=>{o.removeEventListener("resize",r)}},U:(e,t)=>(r.set(e,t),i.A(e),()=>{r.delete(e),i.j(e)}),P(){s&&s(),i.P()}}},N=(e,t)=>{let o;const n="height",r="width",i=new WeakMap,s=new Set,l=new Set,c=new Map,a=(e,t)=>`${e}-${t}`,f=F((f=>{const d=new Set,h=new Set;for(const{target:s,contentRect:l}of f)if(s.offsetParent)if(s===o)e.D(4,l[n]),t.D(4,l[r]);else{const e=i.get(s);if(e){const[t,o]=e,i=a(t,o),s=c.get(i),f=[l[n],l[r]];let u,_;s?(s[0]!==f[0]&&(u=!0),s[1]!==f[1]&&(_=!0)):u=_=!0,u&&d.add(t),_&&h.add(o),(u||_)&&c.set(i,f)}}if(d.size){const t=[];d.forEach((e=>{let o=0;l.forEach((t=>{const n=c.get(a(e,t));n&&(o=u(o,n[0]))})),o&&t.push([e,o])})),e.D(3,t)}if(h.size){const e=[];h.forEach((t=>{let o=0;s.forEach((e=>{const n=c.get(a(e,t));n&&(o=u(o,n[1]))})),o&&e.push([t,o])})),t.D(3,e)}}));return{q(e){f.A(o=e)},U:(e,t,o)=>(i.set(e,[t,o]),s.add(t),l.add(o),f.A(e),()=>{i.delete(e),f.j(e)}),P:f.P}},Q=/*#__PURE__*/r((({F:t,G:o,K:r,N:s,Z:l,ee:c,te:a,oe:d})=>{const u=n(f);D((()=>o(u[X],r)),[r]);const h=i((()=>{const e={margin:0,padding:0,position:l&&d?void 0:"absolute",[a?"height":"width"]:"100%",[a?"top":"left"]:0,[a?H()?"right":"left":"top"]:s,visibility:!l||d?"visible":"hidden"};return a&&(e.display="flex"),e}),[s,l,d,a]);return e(c,"string"==typeof c?{ref:u,style:h,children:t}:{ref:u,style:h,index:r,children:t})})),Z=e=>s(e.p,void 0,e.p)[1],ee=(e,t)=>i((()=>{if("function"==typeof e)return[e,t||0];const o=(e=>{const t=[];return Y(e,t),t})(e);return[e=>o[e],o.length]}),[e,t]),te=/*#__PURE__*/l((({children:t,count:r,overscan:i=4,keepMounted:s,itemSize:l,shift:d,horizontal:u,cache:h,startMargin:_=0,ssrCount:p,as:g="div",item:w="div",scrollRef:S,onScroll:y,onScrollEnd:b,onRangeChange:x},z)=>{const[I,k]=ee(t,r),R=n(f),T=n(!!p),C=U(y),M=U(b),[H,W,E,L]=q((()=>{const e=!!u,t=O(k,l,p,h,!l);return[t,G(t,e),$(t,e),e]}));k!==H.C()&&H.D(5,[k,d]),_!==H.W()&&H.D(6,_);const P=Z(H),[A,V]=H.m(),Y=H.H(),F=H.J(),K=H.h(),N=[],[te,oe]=B(A,V,i,Y,k),ne=t=>{const o=I(t);return e(Q,{G:W.U,K:t,N:H.R(t),Z:H.S(t),ee:w,F:o,te:L,oe:T[X]},j(o,t))};D((()=>{T[X]=!1;const e=H.O(1,(e=>{e?a(P):P()})),t=H.O(4,(()=>{C[X]&&C[X](H.M())})),o=H.O(8,(()=>{M[X]&&M[X]()})),n=e=>{W.q(e),E.A(e)};return S?m((()=>n(S[X]))):n(R[X].parentElement),()=>{e(),t(),o(),W.P(),E.P()}}),[]),D((()=>{E.$()}),[F]),o((()=>{x&&x(A,V)}),[A,V]),c(z,(()=>({get cache(){return H.v()},get scrollOffset(){return H.M()},get scrollSize(){return J(H)},get viewportSize(){return H._()},getItemOffset:H.R,scrollToIndex:E.Y,scrollTo:E.V,scrollBy:E.X})),[]);for(let e=te,t=oe;e<=t;e++)N.push(ne(e));if(s){const e=[],t=[];v(s).forEach((o=>{o<te&&e.push(ne(o)),o>oe&&t.push(ne(o))})),N.unshift(...e),N.push(...t)}return e(g,{ref:R,style:{overflowAnchor:"none",flex:"none",position:"relative",visibility:"hidden",width:L?K:"100%",height:L?"100%":K,pointerEvents:0!==Y?"none":"auto"},children:N})})),oe=/*#__PURE__*/l((({children:t,count:o,overscan:r,keepMounted:i,itemSize:s,shift:l,horizontal:c,reverse:a,cache:d,ssrCount:u,item:h,onScroll:_,onScrollEnd:p,onRangeChange:g,style:v,...m},w)=>{const S=n(f),y=a&&!c;let b=e(te,{ref:w,scrollRef:y?S:void 0,count:o,overscan:r,keepMounted:i,itemSize:s,shift:l,horizontal:c,cache:d,ssrCount:u,item:h,onScroll:_,onScrollEnd:p,onRangeChange:g,children:t});return y&&(b=e("div",{style:{visibility:"hidden",display:"flex",flexDirection:"column",justifyContent:"flex-end",minHeight:"100%"},children:b})),e("div",{ref:S,...m,style:{display:c?"inline-block":"block",[c?"overflowX":"overflowY"]:"auto",contain:"strict",width:"100%",height:"100%",...v},children:b})})),ne=/*#__PURE__*/l((({children:t,count:r,overscan:i=4,itemSize:s,shift:l,horizontal:d,cache:h,ssrCount:_,as:p="div",item:g="div",onScrollEnd:v,onRangeChange:m},w)=>{const[S,y]=ee(t,r),b=n(f),x=U(v),z=n(!!_),[I,k,R,T]=q((()=>{const e=!!d,t=O(y,s,_,h,!s);return[t,K(t,e),A(t,e),e]}));y!==I.C()&&I.D(5,[y,l]);const C=Z(I),[M,H]=I.m(),W=I.H(),E=I.J(),J=I.h(),L=[];D((()=>{z[X]=!1;const e=I.O(1,(e=>{e?a(C):C()})),t=I.O(8,(()=>{x[X]&&x[X]()})),o=b[X];return k.q(o),R.A(o),()=>{e(),t(),k.P(),R.P()}}),[]),D((()=>{R.$()}),[E]),o((()=>{m&&m(M,H)}),[M,H]),c(w,(()=>({get cache(){return I.v()},scrollToIndex:R.Y,get scrollSize(){return(e=>u(e.h(),e._()))(I)}})),[]);for(let[t,o]=B(M,H,i,W,y);t<=o;t++){const o=S(t);L.push(e(Q,{G:k.U,K:t,N:I.R(t),Z:I.S(t),ee:g,F:o,te:T,oe:z[X]},j(o,t)))}return e(p,{ref:b,style:{flex:"none",position:"relative",visibility:"hidden",width:T?J:"100%",height:T?"100%":J,pointerEvents:0!==W?"none":"auto"},children:L})})),re=(e,t)=>`${e}-${t}`,ie=/*#__PURE__*/r((({F:t,G:o,ne:r,re:s,ie:l,se:c,le:a,ce:d,Z:u,ae:h})=>{const _=n(f);return D((()=>o.U(_[X],r,s)),[s,r]),e(h,{ref:_,style:i((()=>({display:"grid",margin:0,padding:0,position:"absolute",top:l,[H()?"right":"left"]:c,visibility:u?"hidden":"visible",minHeight:a,minWidth:d})),[l,c,d,a,u]),children:t})})),se=/*#__PURE__*/l((({children:t,row:o,col:r,cellHeight:s=40,cellWidth:l=100,overscan:d=2,initialRowCount:u,initialColCount:h,item:_="div",style:p,...g},v)=>{const[m,w,S,y]=q((()=>{const e=O(o,s,u),t=O(r,l,h);return[e,t,N(e,t),V(e,t)]}));o!==m.C()&&m.D(5,[o]),r!==w.C()&&w.D(5,[r]);const b=Z(m),x=Z(w),[z,I]=m.m(),[k,R]=w.m(),T=m.H(),C=w.H(),M=m.J(),H=w.J(),W=J(m),E=J(w),L=n(f);D((()=>{const e=L[X],t=m.O(1,(e=>{e?a(b):b()})),o=w.O(1,(e=>{e?a(x):x()}));return S.q(e),y.A(e),()=>{t(),o(),S.P(),y.P()}}),[]),D((()=>{y.$()}),[M,H]),c(v,(()=>({get scrollTop(){return m.M()},get scrollLeft(){return w.M()},get scrollHeight(){return J(m)},get scrollWidth(){return J(w)},get viewportHeight(){return m._()},get viewportWidth(){return w._()},scrollToIndex:y.Y,scrollTo:y.V,scrollBy:y.X})),[]);const P=i((()=>{const e=new Map;return(o,n)=>{let r=e.get(re(o,n));return r||e.set(re(o,n),r=t({rowIndex:o,colIndex:n})),r}}),[t]),[$,A]=B(z,I,d,T,o),[Y,j]=B(k,R,d,C,r),U=[];for(let t=$;t<=A;t++)for(let o=Y;o<=j;o++)U.push(e(ie,{G:S,ne:t,re:o,ie:m.R(t),se:w.R(o),le:m.T(t),ce:w.T(o),Z:m.S(t)||w.S(o),ae:_,F:P(t,o)},re(t,o)));return e("div",{ref:L,...g,style:{overflow:"auto",contain:"strict",width:"100%",height:"100%",...p},children:e("div",{style:{overflowAnchor:"none",flex:"none",position:"relative",visibility:"hidden",width:E,height:W,pointerEvents:0!==T||0!==C?"none":"auto"},children:U})})}));export{oe as VList,te as Virtualizer,ne as WindowVirtualizer,se as experimental_VGrid};
//# sourceMappingURL=index.mjs.map
