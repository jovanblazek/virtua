"use client";
var e=require("react/jsx-runtime"),t=require("react"),n=require("react-dom");const o=null,r=Math.min,i=Math.max,s=Math.abs,l=Array.isArray,c=setTimeout,a=(e,t,n)=>r(n,i(t,e)),d=e=>[...e].sort(((e,t)=>e-t)),f="function"==typeof queueMicrotask?queueMicrotask:e=>{Promise.resolve().then(e)},u=e=>{let t,n;return(...o)=>(t||(t=!0,n=e(...o)),n)},h=-1,_=(e,t,n)=>{const o=n?"unshift":"push";for(let n=0;n<t;n++)e[o](h);return e},g=(e,t)=>{const n=e.t[t];return n===h?e.o:n},p=(e,t,n)=>{const o=e.t[t]===h;return e.t[t]=n,e.i=r(t,e.i),o},v=(e,t)=>{if(!e.l)return 0;if(e.i>=t)return e.u[t];e.i<0&&(e.u[0]=0,e.i=0);let n=e.i,o=e.u[n];for(;n<t;)o+=g(e,n),e.u[++n]=o;return e.i=t,o},w=(e,t,n)=>{for(;n>=0&&n<e.l;){const o=v(e,n);if(o<=t){if(o+g(e,n)>t)break;n++}else n--}return a(n,0,e.l-1)},m=(e,t,n)=>{const o=t-e.l;return e.i=n?-1:r(t-1,e.i),e.l=t,o>0?(_(e.u,o),_(e.t,o,n),e.o*o):(e.u.splice(o),(n?e.t.splice(0,-o):e.t.splice(o)).reduce(((t,n)=>t-(n===h?e.o:n)),0))},S="undefined"!=typeof window,y=()=>document.documentElement,b=e=>e.ownerDocument,x=e=>e.defaultView,z=/*#__PURE__*/u((()=>!!S&&"rtl"===getComputedStyle(y()).direction)),I=/*#__PURE__*/u((()=>/iP(hone|od|ad)/.test(navigator.userAgent))),k=/*#__PURE__*/u((()=>"scrollBehavior"in y().style)),R=e=>i(e.h(),e._()),T=(e,t,n,o,s)=>(1!==o&&(e-=i(0,n)),2!==o&&(t+=i(0,n)),[i(e,0),r(t,s-1)]),C=(e,t=40,n=0,l,c=!1)=>{let a=!!n,f=[],u=0,S=0,y=0,b=0,x=0,z=0,k=0,R=0,T=0,C=a?[0,i(n-1,0)]:o,M=[0,0],H=0;const W=((e,t,n)=>({o:n?n[1]:t,t:n&&n[0]?_(n[0].slice(0,r(e,n[0].length)),i(0,e-n[0].length)):_([],e),l:e,i:-1,u:_([],e)}))(e,t,l),E=new Set,J=()=>y-S,q=e=>((e,t,n,o)=>{const i=w(e,t,r(n,e.l-1));return[i,w(e,t+o,i)]})(W,e,M[0],u),B=()=>(e=>e.l?v(e,e.l-1)+g(e,e.l-1):0)(W),O=e=>v(W,e)-z,D=e=>g(W,e),L=e=>{e&&(I()&&0!==R?z+=e:(x+=e,b++))};return{p:()=>f,v:()=>(e=>[[...e.t],e.o])(W),m:()=>k?M:(M=q(i(0,J()+z+x)),C?[r(M[0],C[0]),i(M[1],C[1])]:M),S:e=>W.t[e]===h,I:()=>!!u,k:()=>!!C&&W.t.slice(i(0,C[0]-1),r(W.l-1,C[1]+1)+1).includes(h),R:O,T:D,C:()=>W.l,M:()=>y,H:()=>R,_:()=>u,W:()=>S,h:B,J:()=>b,q:()=>(k=x,x=0,[k,2===T||J()+u>=B()]),B(e,t){const n=[e,t];return E.add(n),()=>{E.delete(n)}},O(e,t){let n,r,l=0;switch(e){case 1:{const e=k;k=0;const n=t-y,i=s(n);e&&i<s(e)+1||0!==T||(R=n<0?2:1),a&&(C=o,a=!1),y=t,l=4;const c=J();c>=-u&&c<=B()&&(l+=1,r=i>u);break}case 2:l=8,0!==R&&(n=!0,l+=1),R=0,T=0,C=o;break;case 3:{const e=t.filter((([e,t])=>W.t[e]!==t));if(!e.length)break;L(e.reduce(((e,[t,n])=>((2===T||(C?t<C[0]:O(t)+(0===R&&0===T?D(t):0)<J()))&&(e+=n-D(t)),e)),0));for(const[t,n]of e){const e=D(t),o=p(W,t,n);c&&(H+=o?n:n-e)}c&&u&&H>u&&(L(((e,t)=>{let n=0;const o=e.t.filter(((e,o)=>{const r=e!==h;return r&&o<t&&n++,r})),r=e.o;return e.i=-1,((e.o=(e=>{const t=d(e),n=e.length/2|0;return t.length%2==0?(t[n-1]+t[n])/2:t[n]})(o))-r)*i(t-n,0)})(W,M[0])),c=!1),l=3,r=!0;break}case 4:u!==t&&(u=t,l=3);break;case 5:t[1]?(L(m(W,t[0],!0)),T=2,l=1):m(W,t[0]);break;case 6:S=t;break;case 7:T=1;break;case 8:C=q(t),l=1}l&&(f=[],n&&z&&(x+=z,z=0,b++),E.forEach((([e,t])=>{l&e&&t(r)})))}}},M=S?t.useLayoutEffect:t.useEffect,H=(e,t)=>t&&z()?-e:e,W=(e,t,n,r,i,s)=>{const l=Date.now;let a=0,d=!1,f=!1,u=!1,h=!1;const _=(()=>{let t;const n=()=>{t!=o&&clearTimeout(t)},r=()=>{n(),t=c((()=>{t=o,(()=>{if(d||f)return d=!1,void _();u=!1,e.O(2)})()}),150)};return r.D=n,r})(),g=()=>{a=l(),u&&(h=!0),s&&e.O(6,s()),e.O(1,r()),_()},p=t=>{if(d||0===e.H()||t.ctrlKey)return;const o=l()-a;150>o&&50<o&&(n?t.deltaX:t.deltaY)&&(d=!0)},v=()=>{f=!0,u=h=!1},w=()=>{f=!1,I()&&(u=!0)};return t.addEventListener("scroll",g),t.addEventListener("wheel",p,{passive:!0}),t.addEventListener("touchstart",v,{passive:!0}),t.addEventListener("touchend",w,{passive:!0}),{L:()=>{t.removeEventListener("scroll",g),t.removeEventListener("wheel",p),t.removeEventListener("touchstart",v),t.removeEventListener("touchend",w),_.D()},P:()=>{const[t,o]=e.q();t&&(i(H(t,n),o,h),h=!1,o&&e._()>e.h()&&e.O(1,r()))}}},E=(e,t)=>{let n,o,r;const i=t?"scrollLeft":"scrollTop",s=t?"overflowX":"overflowY",l=async(o,s)=>{if(!n)return void f((()=>l(o,s)));r&&r();const a=()=>{let t;return[new Promise(((n,o)=>{t=n,r=o,e.I()&&c(o,150)})),e.B(2,(()=>{t&&t()}))]};if(s&&k()){for(;e.O(8,o()),e.k();){const[e,t]=a();try{await e}catch(e){return}finally{t()}}n.scrollTo({[t?"left":"top"]:H(o(),t),behavior:"smooth"})}else for(;;){const[r,s]=a();try{n[i]=H(o(),t),e.O(7),await r}catch(e){return}finally{s()}}};return{$(l){n=l,o=W(e,l,t,(()=>H(l[i],t)),((t,n,o)=>{if(o){const e=l.style,t=e[s];e[s]="hidden",c((()=>{e[s]=t}))}n?(l[i]=e.M()+t,r&&r()):l[i]+=t}))},L(){o&&o.L()},A(e){l((()=>e))},X(t){t+=e.M(),l((()=>t))},Y(t,{align:n,smooth:o,offset:r=0}={}){if(t=a(t,0,e.C()-1),"nearest"===n){const o=e.R(t),r=e.M();if(o<r)n="start";else{if(!(o+e.T(t)>r+e._()))return;n="end"}}l((()=>r+e.W()+e.R(t)+("end"===n?e.T(t)-e._():"center"===n?(e.T(t)-e._())/2:0)),o)},P:()=>{o&&o.P()}}},J=(e,t)=>{let n;return{$(o){const r=t?"scrollX":"scrollY",i=b(o),s=x(i),l=i.body,c=(e,t,n,o=0)=>{const r=n?"offsetLeft":"offsetTop",i=o+(n&&z()?s.innerWidth-e[r]-e.offsetWidth:e[r]),l=e.offsetParent;return e!==t&&l?c(l,t,n,i):i};n=W(e,s,t,(()=>H(s[r],t)),((n,o)=>{o?s.scroll({[t?"left":"top"]:e.M()+n}):s.scrollBy(t?n:0,t?0:n)}),(()=>c(o,l,t)))},L(){n&&n.L()},P:()=>{n&&n.P()},Y:async(n,o={})=>{const r=o.align||"start",i=o.smooth,s=o.offset||0;n=a(n,0,e.C()-1);const l=e.R(n),c=e._(),d=e.T(n);let f=l+s;if("end"===r)f+=d-c;else if("center"===r)f+=(d-c)/2;else if("nearest"===r){const t=e.M();if(l<t)f=l+s;else{if(!(l+d>t+c))return;f=l+d-c+s}}e.O(8,f);const u=H(f,t);i&&k()?window.scrollTo({[t?"left":"top"]:u,behavior:"smooth"}):window.scrollTo({[t?"left":"top"]:u}),await new Promise((e=>{window.requestAnimationFrame(e)})),e.O(7)}}},q=(e,t)=>{const n=E(e,!1),o=E(t,!0);return{$(e){n.$(e),o.$(e)},L(){n.L(),o.L()},A(e,t){n.A(t),o.A(e)},X(e,t){n.X(t),o.X(e)},Y(e,t){n.Y(t),o.Y(e)},P(){n.P(),o.P()}}},B="current",O=(e,t)=>{if(l(e))for(const n of e)O(n,t);else e==o||"boolean"==typeof e||t.push(e)},D=(e,t)=>{const n=e.key;return n!=o?n:"_"+t},L=e=>{const n=t.useRef();return n[B]||(n[B]=e())},P=e=>{const n=t.useRef(e);return M((()=>{n[B]=e}),[e]),n},$=e=>{let t;return{$(n){(t||(t=new(x(b(n)).ResizeObserver)(e))).observe(n)},j(e){t.unobserve(e)},L(){t&&t.disconnect()}}},A=(e,t)=>{let n;const r=t?"width":"height",i=new WeakMap,s=$((t=>{const s=[];for(const{target:l,contentRect:c}of t)if(l.offsetParent)if(l===n)e.O(4,c[r]);else{const e=i.get(l);e!=o&&s.push([e,c[r]])}s.length&&e.O(3,s)}));return{U(e){s.$(n=e)},V:(e,t)=>(i.set(e,t),s.$(e),()=>{i.delete(e),s.j(e)}),L:s.L}},X=(e,t)=>{const n=t?"width":"height",r=t?"innerWidth":"innerHeight",i=new WeakMap,s=$((t=>{const r=[];for(const{target:e,contentRect:s}of t){if(!e.offsetParent)continue;const t=i.get(e);t!=o&&r.push([t,s[n]])}r.length&&e.O(3,r)}));let l;return{U(t){const n=x(b(t)),o=()=>{e.O(4,n[r])};n.addEventListener("resize",o),o(),l=()=>{n.removeEventListener("resize",o)}},V:(e,t)=>(i.set(e,t),s.$(e),()=>{i.delete(e),s.j(e)}),L(){l&&l(),s.L()}}},Y=(e,t)=>{let n;const o="height",r="width",s=new WeakMap,l=new Set,c=new Set,a=new Map,d=(e,t)=>`${e}-${t}`,f=$((f=>{const u=new Set,h=new Set;for(const{target:i,contentRect:l}of f)if(i.offsetParent)if(i===n)e.O(4,l[o]),t.O(4,l[r]);else{const e=s.get(i);if(e){const[t,n]=e,i=d(t,n),s=a.get(i),c=[l[o],l[r]];let f,_;s?(s[0]!==c[0]&&(f=!0),s[1]!==c[1]&&(_=!0)):f=_=!0,f&&u.add(t),_&&h.add(n),(f||_)&&a.set(i,c)}}if(u.size){const t=[];u.forEach((e=>{let n=0;c.forEach((t=>{const o=a.get(d(e,t));o&&(n=i(n,o[0]))})),n&&t.push([e,n])})),e.O(3,t)}if(h.size){const e=[];h.forEach((t=>{let n=0;l.forEach((e=>{const o=a.get(d(e,t));o&&(n=i(n,o[1]))})),n&&e.push([t,n])})),t.O(3,e)}}));return{U(e){f.$(n=e)},V:(e,t,n)=>(s.set(e,[t,n]),l.add(t),c.add(n),f.$(e),()=>{s.delete(e),f.j(e)}),L:f.L}},j=t.memo((({F:n,G:r,K:i,N:s,Z:l,ee:c,te:a,ne:d})=>{const f=t.useRef(o);M((()=>r(f[B],i)),[i]);const u=t.useMemo((()=>{const e={margin:0,padding:0,position:l&&d?void 0:"absolute",[a?"height":"width"]:"100%",[a?"top":"left"]:0,[a?z()?"right":"left":"top"]:s,visibility:!l||d?"visible":"hidden"};return a&&(e.display="flex"),e}),[s,l,d,a]);return"string"==typeof c?e.jsx(c,{ref:f,style:u,children:n}):e.jsx(c,{ref:f,style:u,index:i,children:n})})),U=e=>t.useReducer(e.p,void 0,e.p)[1],V=(e,n)=>t.useMemo((()=>{if("function"==typeof e)return[e,n||0];const t=(e=>{const t=[];return O(e,t),t})(e);return[e=>t[e],t.length]}),[e,n]),F=t.forwardRef((({children:r,count:i,overscan:s=4,keepMounted:l,itemSize:c,shift:a,horizontal:u,cache:h,startMargin:_=0,ssrCount:g,as:p="div",item:v="div",scrollRef:w,onScroll:m,onScrollEnd:S,onRangeChange:y},b)=>{const[x,z]=V(r,i),I=t.useRef(o),k=t.useRef(!!g),H=P(m),W=P(S),[J,q,O,$]=L((()=>{const e=!!u,t=C(z,c,g,h,!c);return[t,A(t,e),E(t,e),e]}));z!==J.C()&&J.O(5,[z,a]),_!==J.W()&&J.O(6,_);const X=U(J),[Y,F]=J.m(),G=J.H(),K=J.J(),N=J.h(),Q=[],[Z,ee]=T(Y,F,s,G,z),te=t=>{const n=x(t);return e.jsx(j,{G:q.V,K:t,N:J.R(t),Z:J.S(t),ee:v,F:n,te:$,ne:k[B]},D(n,t))};M((()=>{k[B]=!1;const e=J.B(1,(e=>{e?n.flushSync(X):X()})),t=J.B(4,(()=>{H[B]&&H[B](J.M())})),o=J.B(8,(()=>{W[B]&&W[B]()})),r=e=>{q.U(e),O.$(e)};return w?f((()=>r(w[B]))):r(I[B].parentElement),()=>{e(),t(),o(),q.L(),O.L()}}),[]),M((()=>{O.P()}),[K]),t.useEffect((()=>{y&&y(Y,F)}),[Y,F]),t.useImperativeHandle(b,(()=>({get cache(){return J.v()},get scrollOffset(){return J.M()},get scrollSize(){return R(J)},get viewportSize(){return J._()},getItemOffset:J.R,scrollToIndex:O.Y,scrollTo:O.A,scrollBy:O.X})),[]);for(let e=Z,t=ee;e<=t;e++)Q.push(te(e));if(l){const e=[],t=[];d(l).forEach((n=>{n<Z&&e.push(te(n)),n>ee&&t.push(te(n))})),Q.unshift(...e),Q.push(...t)}return e.jsx(p,{ref:I,style:{overflowAnchor:"none",flex:"none",position:"relative",visibility:"hidden",width:$?N:"100%",height:$?"100%":N,pointerEvents:0!==G?"none":"auto"},children:Q})})),G=t.forwardRef((({children:n,count:r,overscan:i,keepMounted:s,itemSize:l,shift:c,horizontal:a,reverse:d,cache:f,ssrCount:u,item:h,onScroll:_,onScrollEnd:g,onRangeChange:p,style:v,...w},m)=>{const S=t.useRef(o),y=d&&!a;let b=e.jsx(F,{ref:m,scrollRef:y?S:void 0,count:r,overscan:i,keepMounted:s,itemSize:l,shift:c,horizontal:a,cache:f,ssrCount:u,item:h,onScroll:_,onScrollEnd:g,onRangeChange:p,children:n});return y&&(b=e.jsx("div",{style:{visibility:"hidden",display:"flex",flexDirection:"column",justifyContent:"flex-end",minHeight:"100%"},children:b})),e.jsx("div",{ref:S,...w,style:{display:a?"inline-block":"block",[a?"overflowX":"overflowY"]:"auto",contain:"strict",width:"100%",height:"100%",...v},children:b})})),K=t.forwardRef((({children:r,count:s,overscan:l=4,itemSize:c,shift:a,horizontal:d,cache:f,ssrCount:u,as:h="div",item:_="div",onScrollEnd:g,onRangeChange:p},v)=>{const[w,m]=V(r,s),S=t.useRef(o),y=P(g),b=t.useRef(!!u),[x,z,I,k]=L((()=>{const e=!!d,t=C(m,c,u,f,!c);return[t,X(t,e),J(t,e),e]}));m!==x.C()&&x.O(5,[m,a]);const R=U(x),[H,W]=x.m(),E=x.H(),q=x.J(),O=x.h(),$=[];M((()=>{b[B]=!1;const e=x.B(1,(e=>{e?n.flushSync(R):R()})),t=x.B(8,(()=>{y[B]&&y[B]()})),o=S[B];return z.U(o),I.$(o),()=>{e(),t(),z.L(),I.L()}}),[]),M((()=>{I.P()}),[q]),t.useEffect((()=>{p&&p(H,W)}),[H,W]),t.useImperativeHandle(v,(()=>({get cache(){return x.v()},scrollToIndex:I.Y,get scrollSize(){return(e=>i(e.h(),e._()))(x)}})),[]);for(let[t,n]=T(H,W,l,E,m);t<=n;t++){const n=w(t);$.push(e.jsx(j,{G:z.V,K:t,N:x.R(t),Z:x.S(t),ee:_,F:n,te:k,ne:b[B]},D(n,t)))}return e.jsx(h,{ref:S,style:{flex:"none",position:"relative",visibility:"hidden",width:k?O:"100%",height:k?"100%":O,pointerEvents:0!==E?"none":"auto"},children:$})})),N=(e,t)=>`${e}-${t}`,Q=t.memo((({F:n,G:r,oe:i,re:s,ie:l,se:c,le:a,ce:d,Z:f,ae:u})=>{const h=t.useRef(o);return M((()=>r.V(h[B],i,s)),[s,i]),e.jsx(u,{ref:h,style:t.useMemo((()=>({display:"grid",margin:0,padding:0,position:"absolute",top:l,[z()?"right":"left"]:c,visibility:f?"hidden":"visible",minHeight:a,minWidth:d})),[l,c,d,a,f]),children:n})})),Z=t.forwardRef((({children:r,row:i,col:s,cellHeight:l=40,cellWidth:c=100,overscan:a=2,initialRowCount:d,initialColCount:f,item:u="div",style:h,..._},g)=>{const[p,v,w,m]=L((()=>{const e=C(i,l,d),t=C(s,c,f);return[e,t,Y(e,t),q(e,t)]}));i!==p.C()&&p.O(5,[i]),s!==v.C()&&v.O(5,[s]);const S=U(p),y=U(v),[b,x]=p.m(),[z,I]=v.m(),k=p.H(),H=v.H(),W=p.J(),E=v.J(),J=R(p),O=R(v),D=t.useRef(o);M((()=>{const e=D[B],t=p.B(1,(e=>{e?n.flushSync(S):S()})),o=v.B(1,(e=>{e?n.flushSync(y):y()}));return w.U(e),m.$(e),()=>{t(),o(),w.L(),m.L()}}),[]),M((()=>{m.P()}),[W,E]),t.useImperativeHandle(g,(()=>({get scrollTop(){return p.M()},get scrollLeft(){return v.M()},get scrollHeight(){return R(p)},get scrollWidth(){return R(v)},get viewportHeight(){return p._()},get viewportWidth(){return v._()},scrollToIndex:m.Y,scrollTo:m.A,scrollBy:m.X})),[]);const P=t.useMemo((()=>{const e=new Map;return(t,n)=>{let o=e.get(N(t,n));return o||e.set(N(t,n),o=r({rowIndex:t,colIndex:n})),o}}),[r]),[$,A]=T(b,x,a,k,i),[X,j]=T(z,I,a,H,s),V=[];for(let t=$;t<=A;t++)for(let n=X;n<=j;n++)V.push(e.jsx(Q,{G:w,oe:t,re:n,ie:p.R(t),se:v.R(n),le:p.T(t),ce:v.T(n),Z:p.S(t)||v.S(n),ae:u,F:P(t,n)},N(t,n)));return e.jsx("div",{ref:D,..._,style:{overflow:"auto",contain:"strict",width:"100%",height:"100%",...h},children:e.jsx("div",{style:{overflowAnchor:"none",flex:"none",position:"relative",visibility:"hidden",width:O,height:J,pointerEvents:0!==k||0!==H?"none":"auto"},children:V})})}));exports.VList=G,exports.Virtualizer=F,exports.WindowVirtualizer=K,exports.experimental_VGrid=Z;
//# sourceMappingURL=index.js.map
