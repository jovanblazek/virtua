var e=require("vue");const t=null,o=Math.min,r=Math.max,n=Math.abs,s=setTimeout,i=(e,t,n)=>o(n,r(t,e)),l="function"==typeof queueMicrotask?queueMicrotask:e=>{Promise.resolve().then(e)},c=e=>{let t,o;return(...r)=>(t||(t=!0,o=e(...r)),o)},a=-1,u=(e,t,o)=>{const r=o?"unshift":"push";for(let o=0;o<t;o++)e[r](a);return e},f=(e,t)=>{const o=e.t[t];return o===a?e.o:o},d=(e,t,r)=>{const n=e.t[t]===a;return e.t[t]=r,e.i=o(t,e.i),n},p=(e,t)=>{if(!e.l)return 0;if(e.i>=t)return e.u[t];e.i<0&&(e.u[0]=0,e.i=0);let o=e.i,r=e.u[o];for(;o<t;)r+=f(e,o),e.u[++o]=r;return e.i=t,r},_=(e,t,o)=>{for(;o>=0&&o<e.l;){const r=p(e,o);if(r<=t){if(r+f(e,o)>t)break;o++}else o--}return i(o,0,e.l-1)},h=(e,t,r)=>{const n=t-e.l;return e.i=r?-1:o(t-1,e.i),e.l=t,n>0?(u(e.u,n),u(e.t,n,r),e.o*n):(e.u.splice(n),(r?e.t.splice(0,-n):e.t.splice(n)).reduce(((t,o)=>t-(o===a?e.o:o)),0))},g="undefined"!=typeof window,m=()=>document.documentElement,v=e=>e.ownerDocument,b=e=>e.defaultView,y=/*#__PURE__*/c((()=>!!g&&"rtl"===getComputedStyle(m()).direction)),S=/*#__PURE__*/c((()=>/iP(hone|od|ad)/.test(navigator.userAgent))),w=/*#__PURE__*/c((()=>"scrollBehavior"in m().style)),z=(e,t,n,s,i)=>(1!==s&&(e-=r(0,n)),2!==s&&(t+=r(0,n)),[r(e,0),o(t,i-1)]),x=(e,s=40,i=0,l,c=!1)=>{let g=!!i,m=[],v=0,b=0,y=0,w=0,z=0,x=0,k=0,I=0,O=0,C=g?[0,r(i-1,0)]:t,j=[0,0],B=0;const R=((e,t)=>({o:t,t:u([],e),l:e,i:-1,u:u([],e)}))(e,s),T=new Set,q=()=>y-b,N=e=>((e,t,r,n)=>{const s=_(e,t,o(r,e.l-1));return[s,_(e,t+n,s)]})(R,e,j[0],v),E=()=>(e=>e.l?p(e,e.l-1)+f(e,e.l-1):0)(R),M=e=>p(R,e)-x,H=e=>f(R,e),A=e=>{e&&(S()&&0!==I?x+=e:(z+=e,w++))};return{p:()=>m,h:()=>(e=>[[...e.t],e.o])(R),m:()=>k?j:(j=N(r(0,q()+x+z)),C?[o(j[0],C[0]),r(j[1],C[1])]:j),v:e=>R.t[e]===a,S:()=>!!v,k:()=>!!C&&R.t.slice(r(0,C[0]-1),o(R.l-1,C[1]+1)+1).includes(a),I:M,O:H,C:()=>R.l,j:()=>y,B:()=>I,R:()=>v,T:()=>b,q:E,N:()=>w,M:()=>(k=z,z=0,[k,2===O||q()+v>=E()]),H(e,t){const o=[e,t];return T.add(o),()=>{T.delete(o)}},A(e,o){let s,i,l=0;switch(e){case 1:{const e=k;k=0;const r=o-y,s=n(r);e&&s<n(e)+1||0!==O||(I=r<0?2:1),g&&(C=t,g=!1),y=o,l=4;const c=q();c>=-v&&c<=E()&&(l+=1,i=s>v);break}case 2:l=8,0!==I&&(s=!0,l+=1),I=0,O=0,C=t;break;case 3:{const e=o.filter((([e,t])=>R.t[e]!==t));if(!e.length)break;A(e.reduce(((e,[t,o])=>((2===O||(C?t<C[0]:M(t)+(0===I&&0===O?H(t):0)<q()))&&(e+=o-H(t)),e)),0));for(const[t,o]of e){const e=H(t),r=d(R,t,o);c&&(B+=r?o:o-e)}c&&v&&B>v&&(A(((e,t)=>{let o=0;const n=e.t.filter(((e,r)=>{const n=e!==a;return n&&r<t&&o++,n})),s=e.o;return e.i=-1,((e.o=(e=>{const t=(e=>[...e].sort(((e,t)=>e-t)))(e),o=e.length/2|0;return t.length%2==0?(t[o-1]+t[o])/2:t[o]})(n))-s)*r(t-o,0)})(R,j[0])),c=!1),l=3,i=!0;break}case 4:v!==o&&(v=o,l=3);break;case 5:o[1]?(A(h(R,o[0],!0)),O=2,l=1):h(R,o[0]);break;case 6:b=o;break;case 7:O=1;break;case 8:C=N(o),l=1}l&&(m=[],s&&x&&(z+=x,x=0,w++),T.forEach((([e,t])=>{l&e&&t(i)})))}}},k=e=>{let t;return{J(o){(t||(t=new(b(v(o)).ResizeObserver)(e))).observe(o)},P(e){t.unobserve(e)},D(){t&&t.disconnect()}}},I=(e,t)=>t&&y()?-e:e,O=(e,o,r,n,i,l)=>{const c=Date.now;let a=0,u=!1,f=!1,d=!1,p=!1;const _=(()=>{let o;const r=()=>{o!=t&&clearTimeout(o)},n=()=>{r(),o=s((()=>{o=t,(()=>{if(u||f)return u=!1,void _();d=!1,e.A(2)})()}),150)};return n.L=r,n})(),h=()=>{a=c(),d&&(p=!0),l&&e.A(6,l()),e.A(1,n()),_()},g=t=>{if(u||0===e.B()||t.ctrlKey)return;const o=c()-a;150>o&&50<o&&(r?t.deltaX:t.deltaY)&&(u=!0)},m=()=>{f=!0,d=p=!1},v=()=>{f=!1,S()&&(d=!0)};return o.addEventListener("scroll",h),o.addEventListener("wheel",g,{passive:!0}),o.addEventListener("touchstart",m,{passive:!0}),o.addEventListener("touchend",v,{passive:!0}),{D:()=>{o.removeEventListener("scroll",h),o.removeEventListener("wheel",g),o.removeEventListener("touchstart",m),o.removeEventListener("touchend",v),_.L()},W:()=>{const[t,o]=e.M();t&&(i(I(t,r),o,p),p=!1,o&&e.R()>e.q()&&e.A(1,n()))}}},C=/*#__PURE__*/e.defineComponent({props:{X:{type:Object,required:!0},Y:{type:Function,required:!0},F:{type:Number,required:!0},U:{type:Number,required:!0},V:{type:Boolean},G:{type:Boolean},K:{type:Boolean},Z:{type:String,required:!0}},setup(t){const o=e.ref();return e.watch((()=>o.value&&t.F),((e,r,n)=>{n(t.Y(o.value,t.F))}),{flush:"post"}),()=>{const{X:r,U:n,V:s,G:i,K:l,Z:c}=t,a={margin:0,padding:0,position:s&&l?void 0:"absolute",[i?"height":"width"]:"100%",[i?"top":"left"]:"0px",[i?y()?"right":"left":"top"]:n+"px",visibility:!s||l?"visible":"hidden"};return i&&(a.display="flex"),e.createVNode(c,{ref:o,style:a},"function"==typeof(u=r)||"[object Object]"===Object.prototype.toString.call(u)&&!e.isVNode(u)?r:{default:()=>[r],_:2},8,["style"]);var u}}}),j=(e,o)=>{const r=e.key;return r!=t?r:"_"+o},B={data:{type:Array,required:!0},overscan:{type:Number,default:4},itemSize:Number,shift:Boolean,horizontal:Boolean,startMargin:{type:Number,default:0},ssrCount:Number,scrollRef:Object,as:{type:String,default:"div"},item:{type:String,default:"div"}},R=/*#__PURE__*/e.defineComponent({props:B,emits:["scroll","scrollEnd","rangeChange"],setup(o,{emit:n,expose:c,slots:a}){var u;let f=!!o.ssrCount;const d=o.horizontal,p=e.ref(),_=x(o.data.length,null!==(u=o.itemSize)&&void 0!==u?u:40,o.ssrCount,0,!o.itemSize),h=((e,o)=>{let r;const n=o?"width":"height",s=new WeakMap,i=k((o=>{const i=[];for(const{target:l,contentRect:c}of o)if(l.offsetParent)if(l===r)e.A(4,c[n]);else{const e=s.get(l);e!=t&&i.push([e,c[n]])}i.length&&e.A(3,i)}));return{$(e){i.J(r=e)},ee:(e,t)=>(s.set(e,t),i.J(e),()=>{s.delete(e),i.P(e)}),D:i.D}})(_,d),g=((e,t)=>{let o,r,n;const c=t?"scrollLeft":"scrollTop",a=t?"overflowX":"overflowY",u=async(r,i)=>{if(!o)return void l((()=>u(r,i)));n&&n();const a=()=>{let t;return[new Promise(((o,r)=>{t=o,n=r,e.S()&&s(r,150)})),e.H(2,(()=>{t&&t()}))]};if(i&&w()){for(;e.A(8,r()),e.k();){const[e,t]=a();try{await e}catch(e){return}finally{t()}}o.scrollTo({[t?"left":"top"]:I(r(),t),behavior:"smooth"})}else for(;;){const[n,s]=a();try{o[c]=I(r(),t),e.A(7),await n}catch(e){return}finally{s()}}};return{J(i){o=i,r=O(e,i,t,(()=>I(i[c],t)),((t,o,r)=>{if(r){const e=i.style,t=e[a];e[a]="hidden",s((()=>{e[a]=t}))}o?(i[c]=e.j()+t,n&&n()):i[c]+=t}))},D(){r&&r.D()},te(e){u((()=>e))},oe(t){t+=e.j(),u((()=>t))},re(t,{align:o,smooth:r,offset:n=0}={}){if(t=i(t,0,e.C()-1),"nearest"===o){const r=e.I(t),n=e.j();if(r<n)o="start";else{if(!(r+e.O(t)>n+e.R()))return;o="end"}}u((()=>n+e.T()+e.I(t)+("end"===o?e.O(t)-e.R():"center"===o?(e.O(t)-e.R())/2:0)),r)},W:()=>{r&&r.W()}}})(_,d),m=e.ref(_.p()),v=_.H(1,(()=>{m.value=_.p()})),b=_.H(4,(()=>{n("scroll",_.j())})),y=_.H(8,(()=>{n("scrollEnd")}));return e.onMounted((()=>{f=!1,l((()=>{const e=e=>{h.$(e),g.J(e)};o.scrollRef?e(o.scrollRef):e(p.value.parentElement)}))})),e.onUnmounted((()=>{v(),b(),y(),h.D(),g.D()})),e.watch((()=>o.data.length),(e=>{_.A(5,[e,o.shift])})),e.watch((()=>o.startMargin),(e=>{_.A(6,e)}),{immediate:!0}),e.watch([m,_.N],(([,e],[,t])=>{e!==t&&g.W()}),{flush:"post"}),e.watch([m,_.m],(([,[e,t]],[,[o,r]])=>{o===e&&r===t||n("rangeChange",e,t)}),{flush:"post"}),c({get scrollOffset(){return _.j()},get scrollSize(){return(e=>r(e.q(),e.R()))(_)},get viewportSize(){return _.R()},getItemOffset:_.I,scrollToIndex:g.re,scrollTo:g.te,scrollBy:g.oe}),()=>{m.value;const t=o.as,r=o.item,n=o.data.length,[s,i]=_.m(),l=_.B(),c=_.q(),u=[];for(let[t,c]=z(s,i,o.overscan,l,n);t<=c;t++){const n=a.default(o.data[t])[0];u.push(e.createVNode(C,{key:j(n,t),Y:h.ee,F:t,U:_.I(t),V:_.v(t),X:n,G:d,K:f,Z:r},null,8,["_resizer","_index","_offset","_hide","_children","_isHorizontal","_isSSR","_as"]))}return e.createVNode(t,{ref:p,style:{overflowAnchor:"none",flex:"none",position:"relative",visibility:"hidden",width:d?c+"px":"100%",height:d?"100%":c+"px",pointerEvents:0!==l?"none":"auto"}},"function"==typeof(g=u)||"[object Object]"===Object.prototype.toString.call(g)&&!e.isVNode(g)?u:{default:()=>[u],_:2},8,["style"]);var g}}}),T={data:{type:Array,required:!0},overscan:{type:Number,default:4},itemSize:Number,shift:Boolean,horizontal:Boolean,ssrCount:Number},q=/*#__PURE__*/e.defineComponent({props:T,emits:["scroll","scrollEnd","rangeChange"],setup(t,{emit:o,expose:r,slots:n}){const s=t.horizontal,i=e=>{o("scroll",e)},l=()=>{o("scrollEnd")},c=(e,t)=>{o("rangeChange",e,t)},a=e.ref();return r({get scrollOffset(){return a.value.scrollOffset},get scrollSize(){return a.value.scrollSize},get viewportSize(){return a.value.viewportSize},getItemOffset:(...e)=>a.value.getItemOffset(...e),scrollToIndex:(...e)=>a.value.scrollToIndex(...e),scrollTo:(...e)=>a.value.scrollTo(...e),scrollBy:(...e)=>a.value.scrollBy(...e)}),()=>{return e.createVNode("div",{style:{display:s?"inline-block":"block",[s?"overflowX":"overflowY"]:"auto",contain:"strict",width:"100%",height:"100%"}},[e.createVNode(R,{ref:a,data:t.data,overscan:t.overscan,itemSize:t.itemSize,shift:t.shift,ssrCount:t.ssrCount,horizontal:s,onScroll:i,onScrollEnd:l,onRangeChange:c},(o=n,"function"==typeof o||"[object Object]"===Object.prototype.toString.call(o)&&!e.isVNode(o)?n:{default:()=>[n],_:2}),8,["data","overscan","itemSize","shift","ssrCount","horizontal","onScroll","onScrollEnd","onRangeChange"])],4);var o}}}),N={data:{type:Array,required:!0},overscan:{type:Number,default:4},itemSize:Number,shift:Boolean,horizontal:Boolean,as:{type:String,default:"div"},item:{type:String,default:"div"}},E=/*#__PURE__*/e.defineComponent({props:N,emits:["scrollEnd","rangeChange"],setup(o,{emit:r,slots:n}){var s;const l=o.horizontal,c=e.ref(),a=x(o.data.length,null!==(s=o.itemSize)&&void 0!==s?s:40,void 0,0,!o.itemSize),u=((e,o)=>{const r=o?"width":"height",n=o?"innerWidth":"innerHeight",s=new WeakMap,i=k((o=>{const n=[];for(const{target:e,contentRect:i}of o){if(!e.offsetParent)continue;const o=s.get(e);o!=t&&n.push([o,i[r]])}n.length&&e.A(3,n)}));let l;return{$(t){const o=b(v(t)),r=()=>{e.A(4,o[n])};o.addEventListener("resize",r),r(),l=()=>{o.removeEventListener("resize",r)}},ee:(e,t)=>(s.set(e,t),i.J(e),()=>{s.delete(e),i.P(e)}),D(){l&&l(),i.D()}}})(a,l),f=((e,t)=>{let o;return{J(r){const n=t?"scrollX":"scrollY",s=v(r),i=b(s),l=s.body,c=(e,t,o,r=0)=>{const n=o?"offsetLeft":"offsetTop",s=r+(o&&y()?i.innerWidth-e[n]-e.offsetWidth:e[n]),l=e.offsetParent;return e!==t&&l?c(l,t,o,s):s};o=O(e,i,t,(()=>I(i[n],t)),((o,r)=>{r?i.scroll({[t?"left":"top"]:e.j()+o}):i.scrollBy(t?o:0,t?0:o)}),(()=>c(r,l,t)))},D(){o&&o.D()},W:()=>{o&&o.W()},re:async(o,r={})=>{const n=r.align||"start",s=r.smooth,l=r.offset||0;o=i(o,0,e.C()-1);const c=e.I(o),a=e.R(),u=e.O(o);let f=c+l;if("end"===n)f+=u-a;else if("center"===n)f+=(u-a)/2;else if("nearest"===n){const t=e.j();if(c<t)f=c+l;else{if(!(c+u>t+a))return;f=c+u-a+l}}e.A(8,f);const d=I(f,t);s&&w()?window.scrollTo({[t?"left":"top"]:d,behavior:"smooth"}):window.scrollTo({[t?"left":"top"]:d}),await new Promise((e=>{window.requestAnimationFrame(e)})),e.A(7)}}})(a,l),d=e.ref(a.p()),p=a.H(1,(()=>{d.value=a.p()})),_=a.H(8,(()=>{r("scrollEnd")}));return e.onMounted((()=>{const e=c.value;e&&(u.$(e),f.J(e))})),e.onUnmounted((()=>{p(),_(),u.D(),f.D()})),e.watch((()=>o.data.length),(e=>{a.A(5,[e,o.shift])})),e.watch([d,a.N],(([,e],[,t])=>{e!==t&&f.W()}),{flush:"post"}),e.watch([d,a.m],(([,[e,t]],[,[o,n]])=>{o===e&&n===t||r("rangeChange",e,t)}),{flush:"post"}),()=>{d.value;const t=o.as,r=o.item,s=o.data.length,[i,f]=a.m(),p=a.B(),_=a.q(),h=[];for(let[t,c]=z(i,f,o.overscan,p,s);t<=c;t++){const s=n.default(o.data[t])[0];h.push(e.createVNode(C,{key:j(s,t),Y:u.ee,F:t,U:a.I(t),V:a.v(t),X:s,G:l,Z:r},null,8,["_resizer","_index","_offset","_hide","_children","_isHorizontal","_as"]))}return e.createVNode(t,{ref:c,style:{overflowAnchor:"none",flex:"none",position:"relative",visibility:"hidden",width:l?_+"px":"100%",height:l?"100%":_+"px",pointerEvents:0!==p?"none":"auto"}},"function"==typeof(g=h)||"[object Object]"===Object.prototype.toString.call(g)&&!e.isVNode(g)?h:{default:()=>[h],_:2},8,["style"]);var g}}});exports.VList=q,exports.Virtualizer=R,exports.WindowVirtualizer=E;
//# sourceMappingURL=index.js.map
